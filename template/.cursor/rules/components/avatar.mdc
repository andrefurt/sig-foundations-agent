# rule: Component – Avatar
type: auto_attached
scope: **/*
---
## Overview
Short purpose and when-to-use guidance for **Avatar**.

## Anatomy
- Structure and slots (leading/trailing/media/actions/meta if applicable).

## Props (typed)
- List key props with types, defaults, and constraints.

## States
- Hover, focus, active, disabled, loading, invalid.

## Accessibility
- Roles, labels, keyboard, focus outline, ARIA attributes.

## Usage Examples
- Basic usage
- With slots (icon/text/secondary action)
- Edge cases (long text, truncation)

## Do / Don't
- Do: keep API surface small; reuse Foundations tokens.
- Don't: hardcode colors; expose unstable DOM structure.

## Notes
Merged documentation from repository and component docs (if present).

---

### Source Docs
# Avatar

## Visão geral

`Avatar` é um componente que representa visualmente um utilizador ou entidade.  Quando uma imagem não está disponível, exibe automaticamente as iniciais, garantindo que haja sempre um identificador visual【182683320463706†L20-L35】.

## Anatomia e subcomponentes

Um avatar é composto por três elementos principais:

```tsx
<Avatar>
  <AvatarImage />
  <AvatarFallback />
</Avatar>
```【182683320463706†L9-L16】

- **Avatar**: contêiner principal que estende `div`【182683320463706†L20-L23】.
- **AvatarImage**: renderiza a imagem (`<img>`) quando `src` é fornecido【182683320463706†L38-L48】.
- **AvatarFallback**: mostra texto (geralmente iniciais) quando a imagem não está disponível【182683320463706†L50-L60】.

## API

| Propriedade | Tipo | Predefinição | Descrição |
| --- | --- | --- | --- |
| **size** | `'2xs'`, `'xs'`, `'sm'`, `'md'`, `'lg'`, `'xl'`, `'2xl'`, `'3xl'` | `'md'` | Define o tamanho do avatar【182683320463706†L26-L30】. |
| **variant** | `'circle'` ou `'square'` | `'circle'` | Forma do avatar (circular ou quadrado)【182683320463706†L31-L34】. |
| **src** (AvatarImage) | `string` | – | URL da imagem a exibir【182683320463706†L43-L48】. |
| **children** (AvatarFallback) | `string` | – | Texto a mostrar quando não há imagem【182683320463706†L50-L60】. |

## Boas práticas

- Utilize imagens de alta resolução para evitar pixelização nos tamanhos grandes.
- Providencie sempre texto de fallback com as iniciais para garantir identificação caso a imagem falhe.
- Ajuste `variant` para alinhar com a estética do produto (circular para fotos de perfil; quadrado para ícones ou logótipos).
- Mantenha contraste entre o fundo e as iniciais para legibilidade.

## Source Snapshot
_Synced from foundations-main (read-only)._

**src/foundations/ui/avatar/avatar.tsx**

```tsx
"use client";

import { UserIcon } from "@phosphor-icons/react";
import { VariantProps } from "cva";

import { cn, cva } from "@/lib/utils";

const getInitials = (name: string | undefined) => {
  if (!name) return "";

  if (name.length === 1 || name.length === 2) return name;

  return name
    .split(" ")
    .map((n) => n[0])
    .join("");
};

const avatarStyle = cva({
  base: "bg-foreground-secondary/10 shadow-[inset_0_0_0_1px_--alpha(var(--color-foreground)/8%)] backdrop-blur-sm flex items-center justify-center overflow-hidden text-foreground/80 font-semibold relative",
  variants: {
    variant: {
      circle: "rounded-full",
      square: "rounded-md",
    },
    size: {
      "2xs": "size-4 text-2xs",
      xs: "size-6 text-2xs",
      sm: "size-8 text-xs",
      md: "size-10 text-sm",
      lg: "size-12 text-base",
      xl: "size-14 text-lg",
      "2xl": "size-16 text-xl",
      "3xl": "size-20 text-3xl",
    },
  },
});

interface AvatarProps extends React.ComponentPropsWithRef<"div"> {
  size?: VariantProps<typeof avatarStyle>["size"];
  variant?: VariantProps<typeof avatarStyle>["variant"];
}

const Avatar = ({
  className,
  variant = "circle",
  size = "md",
  children,
  ...props
}: AvatarProps) => {
  return (
    <div className={cn(avatarStyle({ variant, size }), className)} {...props}>
      {children}
    </div>
  );
};

interface AvatarImageProps extends React.ComponentPropsWithRef<"img"> {
  src: string;
}

const AvatarImage = ({ className, src, ...props }: AvatarImageProps) => {
  return (
    // eslint-disable-next-line @next/next/no-img-element
    <img
      className={cn("absolute inset-0 z-1 object-cover", className)}
      src={src}
      alt=""
      {...props}
    />
  );
};

interface AvatarFallbackProps extends React.ComponentPropsWithRef<"div"> {
  children?: string;
}

const AvatarFallback = ({
  className,
  children,
  ...props
}: AvatarFallbackProps) => {
  return (
    <div className={cn("opacity-80", className)} {...props}>
      {getInitials(children) || <UserIcon weight="bold" />}
    </div>
  );
};

export { Avatar, AvatarFallback, AvatarImage };

```

**src/foundations/ui/avatar/examples/avatar-on-top-of-media.preview.tsx**

```tsx
import { Avatar, AvatarFallback } from "@/foundations/ui/avatar/avatar";

export default function AvatarOnTopOfMediaPreview() {
  return (
    <div
      className="relative size-32 overflow-hidden rounded-lg bg-cover bg-center"
      style={{
        backgroundImage:
          "url(https://images.unsplash.com/photo-1682687220742-aba13b6e50ba?q=80)",
      }}
    >
      <div className="flex h-full items-center justify-center">
        <Avatar>
          <AvatarFallback>Pedro Brandão</AvatarFallback>
        </Avatar>
      </div>
    </div>
  );
}

```

**src/foundations/ui/avatar/examples/avatar-sizes.preview.tsx**

```tsx
import { Avatar, AvatarFallback } from "@/foundations/ui/avatar/avatar";

export default function AvatarSizesPreview() {
  return (
    <div className="flex flex-wrap items-center gap-2">
      <Avatar size="2xs">
        <AvatarFallback>Pedro Brandão</AvatarFallback>
      </Avatar>
      <Avatar size="xs">
        <AvatarFallback>Pedro Brandão</AvatarFallback>
      </Avatar>
      <Avatar size="sm">
        <AvatarFallback>Pedro Brandão</AvatarFallback>
      </Avatar>
      <Avatar size="md">
        <AvatarFallback>Pedro Brandão</AvatarFallback>
      </Avatar>
      <Avatar size="lg">
        <AvatarFallback>Pedro Brandão</AvatarFallback>
      </Avatar>
      <Avatar size="xl">
        <AvatarFallback>Pedro Brandão</AvatarFallback>
      </Avatar>
      <Avatar size="2xl">
        <AvatarFallback>Pedro Brandão</AvatarFallback>
      </Avatar>
      <Avatar size="3xl">
        <AvatarFallback>Pedro Brandão</AvatarFallback>
      </Avatar>
    </div>
  );
}

```

**src/foundations/ui/avatar/examples/avatar-custom-color.preview.tsx**

```tsx
import { Avatar, AvatarFallback } from "@/foundations/ui/avatar/avatar";

export default function AvatarCustomColorPreview() {
  return (
    <Avatar className="bg-emerald-500/20">
      <AvatarFallback>Pedro Brandão</AvatarFallback>
    </Avatar>
  );
}

```

**src/foundations/ui/avatar/examples/avatar-broken-image.preview.tsx**

```tsx
import {
  Avatar,
  AvatarFallback,
  AvatarImage,
} from "@/foundations/ui/avatar/avatar";

export default function AvatarBrokenImagePreview() {
  return (
    <Avatar>
      <AvatarImage src="broken-image-url" />
      <AvatarFallback>Pedro Brandão</AvatarFallback>
    </Avatar>
  );
}

```

**src/foundations/ui/avatar/examples/avatar-fallback.preview.tsx**

```tsx
import { Avatar, AvatarFallback } from "@/foundations/ui/avatar/avatar";

export default function AvatarFallbackPreview() {
  return (
    <div className="flex flex-wrap gap-2">
      {/* Full name */}
      <Avatar>
        <AvatarFallback>Pedro Brandão</AvatarFallback>
      </Avatar>
      {/* One word */}
      <Avatar>
        <AvatarFallback>Significa</AvatarFallback>
      </Avatar>
      {/* Initials */}
      <Avatar>
        <AvatarFallback>PB</AvatarFallback>
      </Avatar>
      {/* No fallback */}
      <Avatar>
        <AvatarFallback />
      </Avatar>
    </div>
  );
}

```
