# rule: Component – Tabs
type: intelligent
scope: **/*
---
## Overview
Short purpose and when-to-use guidance for **Tabs**.

## Anatomy
- Structure and slots (leading/trailing/media/actions/meta if applicable).

## Props (typed)
- List key props with types, defaults, and constraints.

## States
- Hover, focus, active, disabled, loading, invalid.

## Accessibility
- Roles, labels, keyboard, focus outline, ARIA attributes.

## Usage Examples
- Basic usage
- With slots (icon/text/secondary action)
- Edge cases (long text, truncation)

## Do / Don't
- Do: keep API surface small; reuse Foundations tokens.
- Don't: hardcode colors; expose unstable DOM structure.

## Notes
Merged documentation from repository and component docs (if present).

---

### Source Docs
# Tabs

## Visão geral

`Tabs` fornece um sistema de navegação que alterna entre diferentes painéis de conteúdo.  Implementa animações suaves com Framer Motion, suporta navegação por teclado e oferece orientações horizontal e vertical【166260318450484†L19-L28】.

## Funcionalidades principais

- **Animações suaves**: transições animadas entre tabs usando Motion【166260318450484†L21-L23】.
- **Navegação por teclado**: permite mudar de tab com setas; implementa todas as interacções do padrão WAI‑ARIA Tabs【166260318450484†L21-L27】【166260318450484†L130-L134】.
- **Orientação**: pode ser horizontal ou vertical【166260318450484†L24-L25】.
- **Estado controlado ou não**: aceita `selectedIndex` e `onChange` para controlar externamente o tab activo【166260318450484†L45-L61】.
- **Acessibilidade**: adiciona roles e atributos adequados; permite renderização através de `asChild` para customização【166260318450484†L70-L83】.

## Dependências

- Utiliza `Slot` para mesclar props e a biblioteca Motion para animações【166260318450484†L8-L15】.

## Anatomia

```tsx
<Tabs defaultIndex={0}>
  <TabsItems>
    <TabsItem />
    …
  </TabsItems>
  <TabsPanels>
    <TabsPanel />
    …
  </TabsPanels>
</Tabs>
```【166260318450484†L31-L39】

Componentes:

- **Tabs**: contêiner principal que gere estado e orientação【166260318450484†L44-L47】.
- **TabsItems**: contêiner para os botões de tabs【166260318450484†L72-L74】.
- **TabsItem**: botão individual de tab【166260318450484†L85-L100】.
- **TabsPanels**: contêiner para painéis de conteúdo【166260318450484†L103-L107】.
- **TabsPanel**: painel de conteúdo correspondente a um tab【166260318450484†L117-L127】.

## API (Tabs)

| Propriedade | Tipo | Predefinição | Descrição |
| --- | --- | --- | --- |
| **defaultIndex** | `number` | – | Índice activo inicialmente【166260318450484†L45-L54】. |
| **selectedIndex** | `number` | – | Índice activo no modo controlado【166260318450484†L55-L58】. |
| **onChange** | `(index: number) => void` | – | Callback quando o tab activo muda【166260318450484†L59-L62】. |
| **orientation** | `'horizontal'` ou `'vertical'` | `'horizontal'` | Define orientação dos tabs【166260318450484†L63-L67】. |

## API (TabsItem)

| Propriedade | Tipo | Predefinição | Descrição |
| --- | --- | --- | --- |
| **asChild** | `boolean` | – | Renderiza o botão como filho personalizado【166260318450484†L90-L94】. |
| **disabled** | `boolean` | `false` | Desactiva o tab【166260318450484†L95-L99】. |

## API (TabsPanels, TabsPanel)

Ambos suportam a propriedade `asChild` para renderizar elementos personalizados【166260318450484†L103-L115】.

## Boas práticas

- **Organização de conteúdo**: escolha rótulos claros e curtos; ordene os tabs de forma lógica【166260318450484†L158-L163】.
- **Performance**: carregue painéis pesados de forma preguiçosa e evite animações complexas em dispositivos mais fracos【166260318450484†L164-L168】.
- **Acessibilidade**: siga o padrão WAI‑ARIA Tabs; certifique‑se de que tabpanels são associados aos respectivos botões e que a navegação por teclado funciona correctamente【166260318450484†L170-L174】.
- **Considerações móveis**: aumente a área de toque dos botões e, quando houver muitas tabs, considere torná‑las roláveis【166260318450484†L176-L179】.

## Source Snapshot
_Synced from foundations-main (read-only)._

**src/foundations/ui/tabs/tabs.tsx**

```tsx
"use client";

import { motion } from "motion/react";
import {
  Children,
  createContext,
  use,
  useCallback,
  useId,
  useLayoutEffect,
  useMemo,
  useState,
} from "react";

import { Slot } from "@/foundations/components/slot/slot";
import { cn } from "@/lib/utils";

interface TabsContextValue {
  id: string;
  tabs: string[];
  selectedTab: string | undefined;
  setSelectedTab: (id: string) => void;
  next: () => void;
  previous: () => void;
  orientation: "horizontal" | "vertical";
  registerTab: (id: string) => () => void;
}

const TabsContext = createContext<TabsContextValue | null>(null);

const useTabsContext = () => {
  const context = use(TabsContext);
  if (!context)
    throw new Error("TabsContext must be used within a Tabs component");
  return context;
};

interface TabsProps
  extends Omit<React.ComponentPropsWithRef<"div">, "onChange"> {
  defaultIndex?: number;
  selectedIndex?: number;
  onChange?: (index: number) => void;
  orientation?: TabsContextValue["orientation"];
  children: React.ReactNode;
}

const Tabs = ({
  defaultIndex,
  selectedIndex: selectedIndexProp,
  onChange: onChangeProp,
  orientation = "horizontal",
  children,
  ...props
}: TabsProps) => {
  const id = useId();
  const [internalSelectedIndex, setInternalSelectedIndex] = useState(
    defaultIndex ?? 0
  );
  const [tabs, setTabs] = useState<string[]>([]);

  const selectedIndex = selectedIndexProp ?? internalSelectedIndex;

  const setSelectedIndex = useCallback(
    (index: number) => {
      setInternalSelectedIndex(index);
      onChangeProp?.(index);

      // focus on the selected tab when changing index
      const itemId = getItemId(tabs[index]);
      if (itemId) {
        const selectedTab = document.getElementById(itemId);
        selectedTab?.focus();
      }
    },
    [onChangeProp, tabs]
  );

  const next = useCallback(() => {
    setSelectedIndex((selectedIndex + 1) % tabs.length);
  }, [tabs.length, selectedIndex, setSelectedIndex]);

  const previous = useCallback(() => {
    setSelectedIndex(selectedIndex <= 0 ? tabs.length - 1 : selectedIndex - 1);
  }, [tabs.length, selectedIndex, setSelectedIndex]);

  const registerTab = useCallback((id: string) => {
    setTabs((prev) => [...prev, id]);

    return () => {
      setTabs((prev) => prev.filter((prevId) => prevId !== id));
    };
  }, []);

  const selectedTab = useMemo(() => tabs[selectedIndex], [tabs, selectedIndex]);

  const setSelectedTab = useCallback(
    (id: string) => {
      setSelectedIndex(tabs.indexOf(id));
    },
    [tabs, setSelectedIndex]
  );

  const ctx = useMemo(
    () => ({
      id,
      tabs,
      selectedTab,
      setSelectedTab,
      next,
      previous,
      orientation,
      registerTab,
    }),
    [
      id,
      tabs,
      selectedTab,
      setSelectedTab,
      next,
      previous,
      orientation,
      registerTab,
    ]
  );

  return (
    <TabsContext value={ctx}>
      <div {...props}>{children}</div>
    </TabsContext>
  );
};

interface TabsItemsProps
  extends Omit<React.ComponentPropsWithRef<"div">, "role"> {
  children: React.ReactNode;
}

const TabsItems = ({ children, className, ...props }: TabsItemsProps) => {
  const { orientation } = useTabsContext();

  return (
    <div
      role="tablist"
      aria-orientation={orientation}
      className={cn(
        "flex gap-1.5",
        orientation === "horizontal"
          ? "items-center pb-4"
          : "flex-col items-start pr-4",
        className
      )}
      {...props}
    >
      {children}
    </div>
  );
};

interface TabsItemProps
  extends Omit<
    React.ComponentPropsWithRef<"button">,
    "id" | "type" | "disabled"
  > {
  children: React.ReactNode;
  asChild?: boolean;
}

const getItemId = (id: string | undefined) => (id ? `tab${id}` : undefined);

const TabsItem = ({
  children,
  asChild,
  onClick,
  onKeyDown,
  className,
  ...props
}: TabsItemProps) => {
  const id = useId();
  const {
    id: tabsId,
    selectedTab,
    setSelectedTab,
    registerTab,
    orientation,
    next,
    previous,
  } = useTabsContext();

  const Comp = asChild ? Slot : "button";

  useLayoutEffect(() => {
    registerTab(id);
  }, [id, registerTab]);

  const isSelected = selectedTab === id;

  const handleKeyboardNavigation = (
    e: React.KeyboardEvent<HTMLButtonElement>
  ) => {
    if (e.key === "Enter" || e.key === " ") {
      setSelectedTab(id);
    }

    const keyOrientationMap = {
      horizontal: {
        next: "ArrowRight",
        prev: "ArrowLeft",
      },
      vertical: {
        next: "ArrowDown",
        prev: "ArrowUp",
      },
    };

    if (keyOrientationMap[orientation].next === e.key) {
      e.preventDefault();
      next();
    }

    if (keyOrientationMap[orientation].prev === e.key) {
      e.preventDefault();
      previous();
    }
  };

  return (
    <Comp
      id={getItemId(id)}
      type="button"
      className={cn(
        "ring-ring text-foreground/50 hover:text-foreground data-selected:text-foreground relative flex cursor-pointer items-center justify-center gap-1.5 rounded-xl px-4 py-2 transition outline-none focus-visible:ring-4",
        "[&>*:not([data-tab-indicator])]:z-10",
        className
      )}
      role="tab"
      aria-controls={getPanelId(id)}
      aria-selected={isSelected || undefined}
      data-selected={isSelected || undefined}
      tabIndex={isSelected ? 0 : -1}
      onClick={(e) => {
        onClick?.(e);

        if (!e.defaultPrevented) {
          setSelectedTab(id);
        }
      }}
      onKeyDown={(e) => {
        onKeyDown?.(e);

        if (!e.defaultPrevented) {
          handleKeyboardNavigation(e);
        }
      }}
      {...props}
    >
      {typeof children === "string" ? <span>{children}</span> : children}
      {isSelected && (
        <motion.span
          data-tab-indicator="true"
          layoutId={tabsId}
          aria-hidden="true"
          className="bg-background-secondary absolute inset-0 z-0 rounded-xl"
          transition={{ type: "spring", duration: 0.3, bounce: 0.2 }}
        />
      )}
    </Comp>
  );
};

interface TabsPanelsProps
  extends Omit<React.ComponentPropsWithRef<"div">, "role"> {
  children: React.ReactNode;
}

const TabsPanels = ({ children, className, ...props }: TabsPanelsProps) => {
  const { tabs } = useTabsContext();

  return (
    <div
      className={cn("ring-ring transition has-focus-visible:ring-4", className)}
      {...props}
    >
      {Children.map(children, (child, index) => (
        <PanelIdContext value={tabs[index]}>{child}</PanelIdContext>
      ))}
    </div>
  );
};

interface TabsPanelProps
  extends Omit<React.ComponentPropsWithRef<"div">, "id"> {
  children: React.ReactNode;
  asChild?: boolean;
}

const PanelIdContext = createContext<string | undefined>(undefined);

const getPanelId = (id: string | undefined) =>
  id ? `tab-panel${id}` : undefined;

const TabsPanel = ({
  children,
  asChild,
  className,
  ...props
}: TabsPanelProps) => {
  const id = use(PanelIdContext);
  const { selectedTab } = useTabsContext();
  const Comp = asChild ? Slot : "div";

  const isSelected = selectedTab === id;

  return (
    <Comp
      id={getPanelId(id)}
      role="tabpanel"
      className={cn("outline-none", className)}
      aria-labelledby={getItemId(id)}
      aria-hidden={!isSelected}
      data-selected={isSelected || undefined}
      tabIndex={isSelected ? 0 : -1}
      {...props}
    >
      {isSelected ? children : null}
    </Comp>
  );
};

export { Tabs, TabsItem, TabsItems, TabsPanel, TabsPanels };

```

**src/foundations/ui/tabs/examples/tabs-controlled.preview.tsx**

```tsx
"use client";

import { useState } from "react";

import {
  Tabs,
  TabsItem,
  TabsItems,
  TabsPanel,
  TabsPanels,
} from "@/foundations/ui/tabs/tabs";

export default function TabsControlledPreview() {
  const [selectedIndex, setSelectedIndex] = useState(0);

  return (
    <div className="space-y-4">
      <div className="flex items-center gap-2">
        <span className="text-foreground-secondary text-sm">Current tab:</span>
        <span className="font-medium">{selectedIndex}</span>
        <button
          onClick={() => setSelectedIndex((prev) => (prev + 1) % 3)}
          className="rounded-lg border px-3 py-1 text-sm"
        >
          Next tab
        </button>
      </div>

      <Tabs selectedIndex={selectedIndex} onChange={setSelectedIndex}>
        <TabsItems>
          <TabsItem>Tab 1</TabsItem>
          <TabsItem>Tab 2</TabsItem>
          <TabsItem>Tab 3</TabsItem>
        </TabsItems>
        <TabsPanels>
          <TabsPanel>Panel 1</TabsPanel>
          <TabsPanel>Panel 2</TabsPanel>
          <TabsPanel>Panel 3</TabsPanel>
        </TabsPanels>
      </Tabs>
    </div>
  );
}

```

**src/foundations/ui/tabs/examples/tabs.preview.tsx**

```tsx
import {
  CreditCardIcon,
  GearIcon,
  UsersIcon,
} from "@phosphor-icons/react/dist/ssr";

import {
  Tabs,
  TabsItem,
  TabsItems,
  TabsPanel,
  TabsPanels,
} from "@/foundations/ui/tabs/tabs";

export default function TabsPreview() {
  return (
    <Tabs>
      <TabsItems>
        <TabsItem>
          <UsersIcon />
          <span>Users</span>
        </TabsItem>
        <TabsItem>
          <CreditCardIcon />
          <span>Billing</span>
        </TabsItem>
        <TabsItem>
          <GearIcon />
          <span>Settings</span>
        </TabsItem>
      </TabsItems>
      <TabsPanels>
        <TabsPanel>Panel 1</TabsPanel>
        <TabsPanel>Panel 2</TabsPanel>
        <TabsPanel>Panel 3</TabsPanel>
      </TabsPanels>
    </Tabs>
  );
}

```

**src/foundations/ui/tabs/examples/tabs-vertical.preview.tsx**

```tsx
import {
  CreditCardIcon,
  GearIcon,
  UsersIcon,
} from "@phosphor-icons/react/dist/ssr";

import {
  Tabs,
  TabsItem,
  TabsItems,
  TabsPanel,
  TabsPanels,
} from "@/foundations/ui/tabs/tabs";

export default function TabsVerticalPreview() {
  return (
    <Tabs orientation="vertical" className="flex gap-4">
      <TabsItems className="w-60">
        <TabsItem className="w-full justify-start">
          <UsersIcon />
          <span>Users</span>
        </TabsItem>
        <TabsItem className="w-full justify-start">
          <CreditCardIcon />
          <span>Billing</span>
        </TabsItem>
        <TabsItem className="w-full justify-start">
          <GearIcon />
          <span>Settings</span>
        </TabsItem>
      </TabsItems>
      <TabsPanels className="w-90">
        <TabsPanel>
          <h3 className="text-lg font-medium">Users Panel</h3>
          <p className="text-foreground-secondary">Manage your users here.</p>
        </TabsPanel>
        <TabsPanel>
          <h3 className="text-lg font-medium">Billing Panel</h3>
          <p className="text-foreground-secondary">
            Manage your billing information.
          </p>
        </TabsPanel>
        <TabsPanel>
          <h3 className="text-lg font-medium">Settings Panel</h3>
          <p className="text-foreground-secondary">
            Configure your application settings.
          </p>
        </TabsPanel>
      </TabsPanels>
    </Tabs>
  );
}

```
