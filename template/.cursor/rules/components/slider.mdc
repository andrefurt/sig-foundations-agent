# rule: Component – Slider
type: intelligent
scope: **/*
---
## Overview
Short purpose and when-to-use guidance for **Slider**.

## Anatomy
- Structure and slots (leading/trailing/media/actions/meta if applicable).

## Props (typed)
- List key props with types, defaults, and constraints.

## States
- Hover, focus, active, disabled, loading, invalid.

## Accessibility
- Roles, labels, keyboard, focus outline, ARIA attributes.

## Usage Examples
- Basic usage
- With slots (icon/text/secondary action)
- Edge cases (long text, truncation)

## Do / Don't
- Do: keep API surface small; reuse Foundations tokens.
- Don't: hardcode colors; expose unstable DOM structure.

## Notes
Merged documentation from repository and component docs (if present).

---

### Source Docs
# Slider

## Visão geral

`Slider` é um componente composto baseado em `<input type="range">` que permite seleccionar um valor num intervalo arrastando um **thumb** sobre uma pista.  Suporta personalização completa através de subcomponentes【332862252055585†L9-L15】.

## Anatomia

O slider é composto por quatro partes:

```tsx
<Slider min={0} max={100} defaultValue={50}>
  <SliderTrack>
    <SliderRange />
  </SliderTrack>
  <SliderThumb />
</Slider>
```【332862252055585†L102-L113】

- **Slider**: contêiner principal que gere o estado e a lógica【332862252055585†L11-L14】.
- **SliderTrack**: barra de fundo que representa o intervalo total【332862252055585†L62-L71】.
- **SliderRange**: parte preenchida que indica o valor seleccionado【332862252055585†L76-L88】.
- **SliderThumb**: botão deslizante que o utilizador arrasta; rende como `input[type="range"]`【332862252055585†L92-L94】.

## API (Slider)

| Propriedade | Tipo | Predefinição | Descrição |
| --- | --- | --- | --- |
| **min** | `number` | `0` | Valor mínimo permitido【332862252055585†L17-L21】. |
| **max** | `number` | `100` | Valor máximo permitido【332862252055585†L23-L25】. |
| **step** | `number` | `1` | Incremento entre valores【332862252055585†L27-L31】. |
| **value** | `number` | – | Valor controlado pelo utilizador【332862252055585†L32-L35】. |
| **defaultValue** | `number` | – | Valor inicial quando não controlado【332862252055585†L36-L39】. |
| **onValueChange** | `(valor: number) => void` | – | Callback ao alterar o valor【332862252055585†L40-L43】. |
| **orientation** | `'horizontal'` ou `'vertical'` | `'horizontal'` | Orientação da pista【332862252055585†L45-L47】. |
| **disabled** | `boolean` | `false` | Desactiva o slider【332862252055585†L49-L52】. |
| **asChild** | `boolean` | `false` | Permite renderizar um elemento personalizado absorvendo as props【332862252055585†L54-L57】. |

## API (SliderTrack, SliderRange, SliderThumb)

Cada subcomponente suporta a propriedade `asChild` para renderizar como elemento personalizado【332862252055585†L67-L86】.

O `SliderThumb` utiliza variáveis CSS internas para personalizar a espessura da pista (`--track-thickness`) e o tamanho do thumb (`--thumb-size`)【332862252055585†L95-L99】.

## Boas práticas

- **Parâmetros**: defina valores mínimos e máximos significativos; utilize `step` adequado para evitar valores imprecisos【332862252055585†L17-L31】.
- **Acessibilidade**: forneça `aria-label` ou `aria-labelledby` e garanta que o slider é utilizável com teclas de setas【332862252055585†L146-L150】.
- **Feedback**: considere mostrar o valor actual em tooltip ou etiqueta para maior precisão【332862252055585†L152-L154】.
- **Interacções**: teste o componente tanto com rato como com toque, assegurando que o thumb é fácil de agarrar em dispositivos móveis【332862252055585†L151-L153】.

## Source Snapshot
_Synced from foundations-main (read-only)._

**src/foundations/ui/slider/slider.tsx**

```tsx
"use client";

import {
  createContext,
  use,
  useCallback,
  useMemo,
  useRef,
  useState,
} from "react";

import { Slot } from "@/foundations/components/slot/slot";
import { composeRefs } from "@/foundations/utils/compose-refs/compose-refs";
import { cn, cva } from "@/lib/utils";

interface SliderContextValue {
  value: number;
  setValue: (value: number) => void;
  min: number;
  max: number;
  step: number;
  orientation: "horizontal" | "vertical";
  disabled: boolean;
  onValueChange?: (value: number) => void;
  progressFactor: number;
}

const SliderContext = createContext<SliderContextValue | null>(null);

const useSliderContext = () => {
  const context = use(SliderContext);
  if (!context) {
    throw new Error("Slider components must be used within a Slider");
  }
  return context;
};

const sliderStyle = cva({
  base: [
    "[--track-thickness:--spacing(2)]",
    "[--thumb-size:--spacing(4)]",
    "inline-flex relative outline-none focus:outline-none",
  ],
  variants: {
    orientation: {
      horizontal: "items-center w-56 h-(--track-thickness)",
      vertical: "justify-center w-(--track-thickness) h-56",
    },
    disabled: {
      true: "opacity-60 pointer-events-none",
      false: "",
    },
  },
  defaultVariants: {
    orientation: "horizontal",
    disabled: false,
  },
});

interface SliderProps
  extends Omit<
    React.ComponentPropsWithRef<"div">,
    "onChange" | "defaultValue"
  > {
  min?: number;
  max?: number;
  step?: number;
  value?: number;
  defaultValue?: number;
  onValueChange?: (value: number) => void;
  orientation?: "horizontal" | "vertical";
  disabled?: boolean;
  asChild?: boolean;
}

const Slider = ({
  min = 0,
  max = 100,
  step = 1,
  value: valueProp,
  defaultValue = min,
  onValueChange,
  orientation = "horizontal",
  disabled = false,
  className,
  asChild,
  children,
  ref,
  ...props
}: SliderProps) => {
  const [internalValue, setInternalValue] = useState(defaultValue);
  const value = valueProp ?? internalValue;

  const setValue = useCallback(
    (newValue: number) => {
      if (valueProp === undefined) {
        setInternalValue(newValue);
      }
      onValueChange?.(newValue);
    },
    [valueProp, onValueChange]
  );

  const progressFactor = useMemo(() => value / max, [value, max]);

  const contextValue = useMemo(
    () => ({
      value,
      setValue,
      min,
      max,
      step,
      orientation,
      disabled,
      onValueChange,
      progressFactor,
    }),
    [
      value,
      setValue,
      min,
      max,
      step,
      orientation,
      disabled,
      onValueChange,
      progressFactor,
    ]
  );

  const Comp = asChild ? Slot : "div";

  return (
    <SliderContext value={contextValue}>
      <Comp
        ref={ref}
        className={cn(sliderStyle({ orientation, disabled }), className)}
        style={{
          "--progress-track-factor": `${progressFactor}`,
        }}
        tabIndex={-1}
        {...props}
      >
        {children}
      </Comp>
    </SliderContext>
  );
};

const sliderTrackStyle = cva({
  base: [
    "absolute bg-foreground-secondary/40 rounded-full pointer-events-none",
  ],
  variants: {
    orientation: {
      horizontal:
        "left-[calc(var(--thumb-size)/2)] w-[calc(100%-var(--thumb-size))] h-(--track-thickness)",
      vertical:
        "bottom-[calc(var(--thumb-size)/2)] w-(--track-thickness) h-[calc(100%-var(--thumb-size))]",
    },
  },
  defaultVariants: {
    orientation: "horizontal",
  },
});

interface SliderTrackProps extends React.ComponentPropsWithRef<"div"> {
  asChild?: boolean;
}

const SliderTrack = ({
  className,
  asChild,
  ref,
  ...props
}: SliderTrackProps) => {
  const { orientation } = useSliderContext();
  const Comp = asChild ? Slot : "div";

  return (
    <Comp
      ref={ref}
      className={cn(sliderTrackStyle({ orientation }), className)}
      tabIndex={-1}
      {...props}
    />
  );
};

const sliderRangeStyle = cva({
  base: ["absolute bg-accent/90 rounded-full z-5 pointer-events-none"],
  variants: {
    orientation: {
      horizontal: "left-0 h-(--track-thickness)",
      vertical: "bottom-0 w-(--track-thickness)",
    },
  },
  defaultVariants: {
    orientation: "horizontal",
  },
});

interface SliderRangeProps extends React.ComponentPropsWithRef<"div"> {
  asChild?: boolean;
}

const SliderRange = ({
  className,
  asChild,
  ref,
  style,
  ...props
}: SliderRangeProps) => {
  const { orientation } = useSliderContext();
  const Comp = asChild ? Slot : "div";

  const rangeStyle = {
    [orientation === "horizontal" ? "width" : "height"]:
      `calc(var(--progress-track-factor) * 100%)`,
    ...style,
  };

  return (
    <Comp
      ref={ref}
      className={cn(sliderRangeStyle({ orientation }), className)}
      style={rangeStyle}
      tabIndex={-1}
      {...props}
    />
  );
};

const sliderThumbStyle = cva({
  base: [
    "absolute z-10 cursor-pointer appearance-none rounded-full outline-none",

    // Reset default styles
    "[&::-webkit-slider-thumb]:appearance-none",
    "[&::-moz-range-thumb]:border-none",

    // Thumb styles
    "[&::-webkit-slider-thumb]:transition",
    "[&::-webkit-slider-thumb]:h-(--thumb-size) [&::-webkit-slider-thumb]:w-(--thumb-size) [&::-webkit-slider-thumb]:bg-foreground",
    "[&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:z-10",
    "[&::-moz-range-thumb]:transition",
    "[&::-moz-range-thumb]:h-(--thumb-size) [&::-moz-range-thumb]:w-(--thumb-size) [&::-moz-range-thumb]:bg-foreground",
    "[&::-moz-range-thumb]:rounded-full",

    // Hover states
    "[&::-webkit-slider-thumb:hover]:scale-130",
    "[&::-moz-range-thumb:hover]:scale-130",

    // Active states
    "[&:active::-webkit-slider-thumb]:ring-4",
    "[&:active::-webkit-slider-thumb]:ring-foreground/40",
    "[&:active::-moz-range-thumb]:ring-4",
    "[&:active::-moz-range-thumb]:ring-foreground/40",

    // Focus states - apply to pseudo-elements only
    "[&:focus-visible::-webkit-slider-thumb]:ring-4",
    "[&:focus-visible::-webkit-slider-thumb]:ring-ring",
    "[&:focus-visible::-moz-range-thumb]:ring-4",
    "[&:focus-visible::-moz-range-thumb]:ring-ring",
  ],
  variants: {
    orientation: {
      horizontal: [
        "w-full h-(--track-thickness)",
        "[&::-webkit-slider-thumb]:-mt-[calc(var(--thumb-size)-var(--track-thickness))/2]",
        "[&::-moz-range-thumb]:-mt-[calc(var(--thumb-size)-var(--track-thickness))/2]",
        "[&::-webkit-slider-runnable-track]:h-(--track-thickness)",
        "[&::-moz-range-track]:h-(--track-thickness)",
      ],
      vertical: [
        "w-(--track-thickness) h-full [writing-mode:vertical-lr] [direction:rtl]",
        "[&::-webkit-slider-thumb]:-ml-[calc(var(--thumb-size)-var(--track-thickness))/2]",
        "[&::-moz-range-thumb]:-ml-[calc(var(--thumb-size)-var(--track-thickness))/2]",
        "[&::-webkit-slider-runnable-track]:w-(--track-thickness)",
        "[&::-moz-range-track]:w-(--track-thickness)",
      ],
    },
  },
  defaultVariants: {
    orientation: "horizontal",
  },
});

type SliderThumbProps = Omit<
  React.ComponentPropsWithRef<"input">,
  "value" | "type"
>;

const SliderThumb = ({
  className,
  onChange,
  ref,
  ...props
}: SliderThumbProps) => {
  const { value, setValue, min, max, step, orientation, disabled } =
    useSliderContext();

  const internalRef = useRef<HTMLInputElement>(null);

  const handleChange = useCallback(
    (e: React.ChangeEvent<HTMLInputElement>) => {
      const newValue = Number(e.target.value);
      setValue(newValue);

      // Update CSS variable for range visualization
      const sliderElement = e.target.closest(
        '[style*="--progress-track-factor"]'
      ) as HTMLElement;
      if (sliderElement) {
        sliderElement.style.setProperty(
          "--progress-track-factor",
          `${newValue / max}`
        );
      }

      onChange?.(e);
    },
    [setValue, max, onChange]
  );

  return (
    <input
      ref=
// ... truncated ...

```

**src/foundations/ui/slider/examples/slider-steps.preview.tsx**

```tsx
import {
  Slider,
  SliderRange,
  SliderThumb,
  SliderTrack,
} from "@/foundations/ui/slider/slider";

export default function SliderPreview() {
  return (
    <Slider min={0} max={100} defaultValue={50} step={10}>
      <SliderTrack>
        <SliderRange />
      </SliderTrack>
      <SliderThumb />
    </Slider>
  );
}

```

**src/foundations/ui/slider/examples/slider.preview.tsx**

```tsx
import {
  Slider,
  SliderRange,
  SliderThumb,
  SliderTrack,
} from "@/foundations/ui/slider/slider";

export default function SliderPreview() {
  return (
    <Slider min={0} max={100} defaultValue={50}>
      <SliderTrack>
        <SliderRange />
      </SliderTrack>
      <SliderThumb />
    </Slider>
  );
}

```

**src/foundations/ui/slider/examples/slider-disabled.preview.tsx**

```tsx
import {
  Slider,
  SliderRange,
  SliderThumb,
  SliderTrack,
} from "@/foundations/ui/slider/slider";

export default function SliderPreview() {
  return (
    <Slider min={0} max={100} defaultValue={50} disabled>
      <SliderTrack>
        <SliderRange />
      </SliderTrack>
      <SliderThumb />
    </Slider>
  );
}

```

**src/foundations/ui/slider/examples/slider-vertical.preview.tsx**

```tsx
import {
  Slider,
  SliderRange,
  SliderThumb,
  SliderTrack,
} from "@/foundations/ui/slider/slider";

export default function SliderPreview() {
  return (
    <Slider min={0} max={100} defaultValue={50} orientation="vertical">
      <SliderTrack>
        <SliderRange />
      </SliderTrack>
      <SliderThumb />
    </Slider>
  );
}

```
