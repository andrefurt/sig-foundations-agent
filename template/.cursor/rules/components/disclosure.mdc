# rule: Component – Disclosure
type: auto_attached
scope: **/*
---
## Overview
Short purpose and when-to-use guidance for **Disclosure**.

## Anatomy
- Structure and slots (leading/trailing/media/actions/meta if applicable).

## Props (typed)
- List key props with types, defaults, and constraints.

## States
- Hover, focus, active, disabled, loading, invalid.

## Accessibility
- Roles, labels, keyboard, focus outline, ARIA attributes.

## Usage Examples
- Basic usage
- With slots (icon/text/secondary action)
- Edge cases (long text, truncation)

## Do / Don't
- Do: keep API surface small; reuse Foundations tokens.
- Don't: hardcode colors; expose unstable DOM structure.

## Notes
Merged documentation from repository and component docs (if present).

---

### Source Docs
# Disclosure

## Visão geral

`Disclosure` fornece um conjunto vertical de elementos interactivos que revelam ou escondem conteúdos ao serem clicados.  É minimalista e pode ser usado como base para construir **accordions**, listas de FAQ ou secções expansíveis【407655368636939†L19-L25】.

## Funcionalidades principais

- **Não estilizado**: permite personalização completa de estilos【407655368636939†L21-L25】.
- **Animações suaves**: utiliza a biblioteca Motion para transições de altura【407655368636939†L21-L23】.
- **Agrupamento opcional**: `DisclosureGroup` possibilita abrir apenas um painel de cada vez【407655368636939†L23-L24】.
- **Modos controlado e não controlado**: pode gerenciar o estado internamente ou externamente【407655368636939†L24-L25】.
- **Triggers personalizáveis**: os botões de activação podem ser qualquer elemento, com ou sem setinha de chevron【407655368636939†L25-L26】.

## Anatomia

```tsx
<DisclosureGroup>
  <Disclosure>
    <DisclosureTrigger>
      <DisclosureChevron />
    </DisclosureTrigger>
    <DisclosureContent />
  </Disclosure>
</DisclosureGroup>
```【407655368636939†L29-L37】

Componentes:

- **Disclosure**: contêiner principal; estende `div`【407655368636939†L43-L45】.
- **DisclosureTrigger**: botão que activa a expansão; estende `button`【407655368636939†L66-L68】.
- **DisclosureContent**: área escondida que mostra o conteúdo【407655368636939†L79-L83】.
- **DisclosureChevron**: ícone opcional que gira ao abrir【407655368636939†L85-L89】.
- **DisclosureGroup**: permite apenas um painel aberto por vez【407655368636939†L91-L95】.

## API resumida

| Componente | Propriedades | Descrição |
| --- | --- | --- |
| **Disclosure** | `defaultOpen?: boolean`, `open?: boolean`, `onOpenChange?: (open: boolean) => void` | Controla o estado aberto de forma controlada ou não controlada【407655368636939†L47-L61】. |
| **DisclosureTrigger** | `asChild?: boolean` | Mescla props no elemento filho【407655368636939†L66-L75】. |
| **DisclosureContent** | (sem props) | Área que é mostrada ou escondida【407655368636939†L79-L83】. |
| **DisclosureChevron** | – | Ícone que roda quando o painel está aberto【407655368636939†L85-L89】. |
| **DisclosureGroup** | – | Envolve vários `Disclosure` e garante exclusividade【407655368636939†L91-L95】. |

## Boas práticas

- **Organização de conteúdo**: utilize rótulos claros e descritivos; mantenha o conteúdo conciso e em ordem lógica【407655368636939†L205-L210】.
- **Considerações móveis**: assegure targets de toque grandes e teste animações em dispositivos de baixo desempenho【407655368636939†L211-L215】.
- **Performance**: carregue conteúdo pesado de forma preguiçosa e considere desactivar animações para optimizar【407655368636939†L217-L220】.
- **Construindo um accordion**: combine `DisclosureGroup` e CSS personalizados para criar accordions com bordas e separadores【407655368636939†L123-L189】.

## Source Snapshot
_Synced from foundations-main (read-only)._

**src/foundations/ui/disclosure/disclosure.tsx**

```tsx
"use client";

import { CaretDownIcon } from "@phosphor-icons/react";
import { AnimatePresence, HTMLMotionProps, motion } from "motion/react";
import { createContext, use, useId, useState } from "react";

import { Slot } from "@/foundations/components/slot/slot";
import { cn } from "@/lib/utils";

interface DisclosureGroupContext {
  open: string | null;
  setOpen: (id: string | null) => void;
}

// let's keep an eye on calc-size
// https://developer.mozilla.org/en-US/docs/Web/CSS/calc-size
// when it's generally available, we can avoid the use of `motion` in this component

const DisclosureGroupContext = createContext<DisclosureGroupContext | null>(
  null
);

const useDisclosureGroupContext = () => use(DisclosureGroupContext);

const DisclosureGroup = ({ children }: { children: React.ReactNode }) => {
  const [open, setOpen] = useState<string | null>(null);

  return (
    <DisclosureGroupContext value={{ open, setOpen }}>
      {children}
    </DisclosureGroupContext>
  );
};

interface DisclosureContext {
  id: string;
  open: boolean;
  setOpen: (open: boolean) => void;
}

const DisclosureContext = createContext<DisclosureContext | null>(null);

const useDisclosureContext = () => {
  const context = use(DisclosureContext);

  if (!context)
    throw new Error("Disclosure components must be used within an Disclosure");

  return context;
};

interface DisclosureProps extends React.ComponentPropsWithRef<"div"> {
  defaultOpen?: boolean;
  open?: boolean;
  onOpenChange?: (open: boolean) => void;
  children: React.ReactNode;
}

const Disclosure = ({
  defaultOpen,
  open: propsOpen,
  onOpenChange,
  children,
  ...props
}: DisclosureProps) => {
  const [internalOpen, setInternalOpen] = useState(defaultOpen ?? false);

  const generatedId = useId();
  const id = props.id ?? generatedId;

  const group = useDisclosureGroupContext();

  let open = propsOpen ?? internalOpen;

  let setOpen = (open: boolean) => {
    setInternalOpen(open);
    onOpenChange?.(open);
  };

  if (group) {
    open = group.open === id;

    setOpen = (open: boolean) => {
      group.setOpen(open ? id : null);
    };
  }

  return (
    <DisclosureContext value={{ open, setOpen, id }}>
      <div {...props}>{children}</div>
    </DisclosureContext>
  );
};

interface DisclosureTriggerProps extends React.ComponentPropsWithRef<"button"> {
  asChild?: boolean;
}

const DisclosureTrigger = ({
  children,
  onClick,
  asChild,
  className,
  ...props
}: DisclosureTriggerProps) => {
  const { open, setOpen, id } = useDisclosureContext();

  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      type="button"
      onClick={(e) => {
        onClick?.(e);

        if (!e.defaultPrevented) setOpen(!open);
      }}
      aria-expanded={open}
      aria-controls={open ? getContentId(id) : undefined}
      data-open={open}
      className={cn(
        "ring-ring flex w-full items-center justify-between text-left outline-none focus-visible:ring-4",
        className
      )}
      {...props}
    >
      {children}
    </Comp>
  );
};

const getContentId = (id: string) => `${id}-Disclosure-content`;

const DisclosureContent = ({
  children,
  className,
  ...props
}: Omit<HTMLMotionProps<"div">, "id" | "children"> & {
  className?: string;
  children: React.ReactNode;
}) => {
  const { open, id } = useDisclosureContext();

  return (
    <AnimatePresence initial={false}>
      {open && (
        <motion.div
          id={getContentId(id)}
          className={cn("overflow-hidden", className)}
          data-open={open}
          transition={{ type: "spring", bounce: 0, visualDuration: 0.15 }}
          initial={{ height: 0 }}
          animate={{ height: "auto" }}
          exit={{ height: 0 }}
          {...props}
        >
          {children}
        </motion.div>
      )}
    </AnimatePresence>
  );
};

const DisclosureChevron = ({
  className,
  ...props
}: React.ComponentPropsWithRef<"span">) => {
  const { open } = useDisclosureContext();

  return (
    <span
      aria-hidden="true"
      className={cn(
        "ease-out-cubic p-1 transition-transform duration-100",
        open && "rotate-180",
        className
      )}
      {...props}
    >
      <CaretDownIcon />
    </span>
  );
};

export {
  Disclosure,
  DisclosureChevron,
  DisclosureContent,
  DisclosureGroup,
  DisclosureTrigger,
};

```

**src/foundations/ui/disclosure/examples/disclosure.preview.tsx**

```tsx
import {
  Disclosure,
  DisclosureContent,
  DisclosureTrigger,
} from "@/foundations/ui/disclosure/disclosure";

export default function DisclosurePreview() {
  return (
    <div className="w-90 text-sm">
      <Disclosure>
        <DisclosureTrigger>
          Did you know that octopuses have three hearts?
        </DisclosureTrigger>
        <DisclosureContent className="text-foreground-secondary">
          Two hearts pump blood to the gills, while the third one circulates it
          to the rest of the body. When they swim, their third heart actually
          stops beating - which is why they tend to crawl more than swim!
        </DisclosureContent>
      </Disclosure>
      <Disclosure>
        <DisclosureTrigger>
          Want to hear about immortal jellyfish?
        </DisclosureTrigger>
        <DisclosureContent className="text-foreground-secondary">
          The Turritopsis dohrnii jellyfish can technically live forever! When
          stressed, it can transform back into a juvenile form by turning its
          existing cells into different cell types. It&apos;s like having a
          reset button for aging!
        </DisclosureContent>
      </Disclosure>
    </div>
  );
}

```

**src/foundations/ui/disclosure/examples/disclosure-styled.preview.tsx**

```tsx
import {
  Disclosure,
  DisclosureChevron,
  DisclosureContent,
  DisclosureGroup,
  DisclosureTrigger,
} from "@/foundations/ui/disclosure/disclosure";
import { cn } from "@/lib/utils";

const AccordionGroup = ({
  children,
  className,
}: React.ComponentProps<"div">) => {
  return (
    <DisclosureGroup>
      <div className={cn("rounded-lg border", className)}>{children}</div>
    </DisclosureGroup>
  );
};

const Accordion = ({
  children,
  className,
}: React.ComponentProps<typeof Disclosure>) => {
  return (
    <Disclosure className={cn("border-b last:border-b-0", className)}>
      {children}
    </Disclosure>
  );
};

const AccordionTrigger = ({
  children,
  className,
}: React.ComponentProps<typeof DisclosureTrigger>) => {
  return (
    <DisclosureTrigger
      className={cn(
        "hover:bg-foreground/5 flex cursor-pointer items-center justify-between gap-4 px-3 py-2 transition-colors",
        className
      )}
    >
      {children}
      <DisclosureChevron />
    </DisclosureTrigger>
  );
};

const AccordionContent = ({
  children,
  className,
}: React.ComponentProps<typeof DisclosureContent>) => {
  return (
    <DisclosureContent>
      <div className={cn("border-t px-3 py-2", className)}>{children}</div>
    </DisclosureContent>
  );
};

export default function DisclosureStyledPreview() {
  return (
    <AccordionGroup>
      <Accordion>
        <AccordionTrigger>
          Did you know that butterflies taste with their feet?
        </AccordionTrigger>
        <AccordionContent>
          Butterflies have taste receptors on their feet that help them identify
          which plants to lay their eggs on. When they land on a plant, they can
          taste it to determine if it&apos;s suitable food for their
          caterpillars.
        </AccordionContent>
      </Accordion>
      <Accordion>
        <AccordionTrigger>
          Want to learn about tardigrade superpowers?
        </AccordionTrigger>
        <AccordionContent>
          Tardigrades, also known as water bears, can survive in space! They can
          withstand extreme temperatures, pressure, radiation, and can even
          survive being completely dehydrated for years by entering a state of
          cryptobiosis.
        </AccordionContent>
      </Accordion>
      <Accordion>
        <AccordionTrigger>
          Have you heard about the immortal jellyfish?
        </AccordionTrigger>
        <AccordionContent>
          The Turritopsis dohrnii jellyfish can technically live forever! When
          stressed or injured, it can transform back into its juvenile stage
          instead of dying, making it the only known animal capable of
          biological immortality.
        </AccordionContent>
      </Accordion>
    </AccordionGroup>
  );
}

```

**src/foundations/ui/disclosure/examples/disclosure-chevron.preview.tsx**

```tsx
import {
  Disclosure,
  DisclosureChevron,
  DisclosureContent,
  DisclosureTrigger,
} from "@/foundations/ui/disclosure/disclosure";

export default function DisclosureChevronPreview() {
  return (
    <div className="w-90 text-sm">
      <Disclosure>
        <DisclosureTrigger>
          Sloths can hold their breath for 40 minutes?
          <DisclosureChevron />
        </DisclosureTrigger>
        <DisclosureContent className="text-foreground-secondary">
          While most mammals can only hold their breath for a few minutes,
          sloths can slow their heart rates to one-third of its normal rate,
          allowing them to stay underwater for up to 40 minutes! This helps them
          escape predators and swim between islands.
        </DisclosureContent>
      </Disclosure>
      <Disclosure>
        <DisclosureTrigger>
          Want to learn about platypus superpowers?
          <DisclosureChevron />
        </DisclosureTrigger>
        <DisclosureContent className="text-foreground-secondary">
          Platypuses have electroreceptors in their bills that detect electrical
          signals from prey! They can sense the electrical fields produced by
          the muscular contractions of small aquatic animals. They&apos;re also
          one of the few mammals that produce venom.
        </DisclosureContent>
      </Disclosure>
    </div>
  );
}

```

**src/foundations/ui/disclosure/examples/disclosure-exclusive.preview.tsx**

```tsx
import {
  Disclosure,
  DisclosureContent,
  DisclosureGroup,
  DisclosureTrigger,
} from "@/foundations/ui/disclosure/disclosure";

export default function DisclosurePreview() {
  return (
    <div className="w-90 text-sm">
      <DisclosureGroup>
        <Disclosure>
          <DisclosureTrigger>
            Did you know that honey never spoils?
          </DisclosureTrigger>
          <DisclosureContent className="text-foreground-secondary">
            Archaeologists have found pots of honey in ancient Egyptian tombs
            that are over 3,000 years old and still perfectly edible! The unique
            chemical composition and low moisture content make it impossible for
            bacteria to grow in honey.
          </DisclosureContent>
        </Disclosure>
        <Disclosure>
          <DisclosureTrigger>
            Want to learn about hummingbird metabolism?
          </DisclosureTrigger>
          <DisclosureContent className="text-foreground-secondary">
            A hummingbird&apos;s heart beats up to 1,260 times per minute during
            flight! They have such a fast metabolism that they need to eat every
            10-15 minutes and visit up to 2,000 flowers per day. At night, they
            enter a state called torpor where their metabolism slows down by 95%
            to survive.
          </DisclosureContent>
        </Disclosure>
      </DisclosureGroup>
    </div>
  );
}

```
